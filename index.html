<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SpeakXR X-Stage | Ù…Ù†ØµØ© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* --- 1. Ø§Ù„ØªØµÙ…ÙŠÙ… (CSS Styles) --- */
        :root {
            --bg-dark: #090e1a;
            --bg-panel: rgba(20, 30, 50, 0.6);
            --primary: #2d9cdb; /* Ø§Ù„Ø£Ø²Ø±Ù‚ */
            --accent: #00e0ff;  /* Ø§Ù„Ø³Ù…Ø§ÙˆÙŠ Ø§Ù„Ù…Ø¶ÙŠØ¡ */
            --glass: rgba(255, 255, 255, 0.05);
            --border: 1px solid rgba(255, 255, 255, 0.1);
            --font: 'Cairo', sans-serif;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }

        body {
            background-color: var(--bg-dark);
            background-image: radial-gradient(circle at top center, #1b2845 0%, var(--bg-dark) 70%);
            color: white;
            font-family: var(--font);
            height: 100vh;
            overflow: hidden;
            display: flex; flex-direction: column;
        }

        /* Header */
        header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px 30px;
            background: rgba(9, 14, 26, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: var(--border);
            z-index: 100;
        }

        .nav-tabs {
            display: flex; gap: 5px;
            background: rgba(0,0,0,0.3); padding: 5px; border-radius: 50px;
        }

        .nav-btn {
            background: transparent; border: none; color: #aaa;
            padding: 8px 20px; border-radius: 30px; cursor: pointer;
            transition: 0.3s; font-family: var(--font);
        }

        .nav-btn.active, .nav-btn:hover { background: rgba(255,255,255,0.1); color: white; }
        
        .logo-box { display: flex; align-items: center; gap: 10px; }
        .logo-circle { width: 40px; height: 40px; background: linear-gradient(45deg, var(--primary), var(--accent)); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; }

        /* Main Content Area */
        main { flex: 1; position: relative; overflow-y: auto; padding: 20px; }

        .view-section {
            display: none; /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„ÙƒÙ„ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ */
            animation: fadeIn 0.5s ease;
        }
        .view-section.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Dashboard Styles */
        .hero-card {
            background: linear-gradient(180deg, rgba(30,40,70,0.5), rgba(10,15,30,0.8));
            border-radius: 20px; border: var(--border);
            padding: 40px; text-align: center; margin-bottom: 20px;
            position: relative; overflow: hidden;
        }
        
        h1 { font-size: 3rem; margin-bottom: 10px; background: linear-gradient(to right, #fff, var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        .btn-main {
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border: none; padding: 12px 40px; border-radius: 50px;
            color: white; font-weight: bold; font-size: 1.1rem; cursor: pointer;
            box-shadow: 0 0 20px rgba(0, 224, 255, 0.3); transition: 0.3s;
        }
        .btn-main:hover { transform: scale(1.05); box-shadow: 0 0 30px rgba(0, 224, 255, 0.5); }

        /* Scenario Grid */
        .grid-container {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;
        }
        .scenario-card {
            background: var(--bg-panel); border: var(--border); padding: 20px; border-radius: 15px;
            text-align: center; cursor: pointer; transition: 0.3s;
        }
        .scenario-card:hover { border-color: var(--accent); background: rgba(0, 224, 255, 0.1); }
        .card-icon { font-size: 2.5rem; margin-bottom: 15px; color: var(--accent); }

        /* Stage (Camera View) */
        #stage-view { height: 100%; display: none; flex-direction: column; }
        .camera-container {
            flex: 1; background: black; border-radius: 20px; overflow: hidden; position: relative;
            background-size: cover; display: flex; flex-direction: column; justify-content: space-between; padding: 20px;
        }
        video#webcam { position: absolute; top:0; left:0; width:100%; height:100%; object-fit: cover; z-index: 0; }
        .overlay-ui { position: relative; z-index: 2; }
        
        .hud-top, .hud-bottom { display: flex; justify-content: space-between; align-items: center; }
        .hud-box { background: rgba(0,0,0,0.6); padding: 10px 20px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.2); backdrop-filter: blur(5px); }

        .mic-btn {
            width: 70px; height: 70px; background: #ff4444; border-radius: 50%; border: 4px solid white;
            cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;
            transition: 0.3s; animation: pulse 2s infinite;
        }
        .mic-btn.active { background: #00ff88; animation: none; }

        /* Analysis & Jury */
        .jury-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
        .jury-panel { background: var(--bg-panel); padding: 20px; border-radius: 15px; border: var(--border); }
        
        .progress-bar { background: rgba(255,255,255,0.1); height: 8px; border-radius: 5px; margin-top: 10px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--accent); width: 0%; transition: width 1s ease; }

        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(255, 68, 68, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(255, 68, 68, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 68, 68, 0); } }

    </style>
</head>
<body>

    <header>
        <div class="logo-box">
            <div class="logo-circle">SX</div>
            <div>
                <strong>SpeakXR</strong> <span style="color:var(--primary)">X-Stage</span>
                <div style="font-size:0.7rem; color:#aaa;">WebXR â€¢ Voice Engine</div>
            </div>
        </div>
        
        <nav class="nav-tabs">
            <button class="nav-btn active" onclick="switchView('dashboard')">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
            <button class="nav-btn" onclick="switchView('scenarios')">Ø¨ÙŠØ¦Ø§Øª Ø§Ù„ØªØ¯Ø±ÙŠØ¨</button>
            <button class="nav-btn" onclick="switchView('stage')">Ø§Ù„Ù…Ø³Ø±Ø­ (XR)</button>
            <button class="nav-btn" onclick="switchView('analysis')">ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø¯Ø§Ø¡</button>
            <button class="nav-btn" onclick="switchView('jury')">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙŠÙ…</button>
        </nav>

        <button class="btn-main" style="padding: 5px 20px; font-size:0.9rem;">Demo âš¡</button>
    </header>

    <main>
        <section id="dashboard" class="view-section active">
            <div class="hero-card">
                <h3>ØªØ­ÙƒÙŠÙ… Ù„Ø­Ø¸ÙŠ â€¢ Ø¬Ù…Ù‡ÙˆØ± ØªÙØ§Ø¹Ù„ÙŠ</h3>
                <h1>Ø£ØªÙ‚Ù† Ø§Ù„Ø®Ø·Ø§Ø¨Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</h1>
                <p style="color:#ccc; margin: 20px 0;">Ù‡Ø°Ø§ Ù„ÙŠØ³ Ù…Ø¬Ø±Ø¯ Ù…ÙˆÙ‚Ø¹ØŒ Ù‡Ø°Ø§ Ù…Ø³Ø±Ø­ ØªØ¯Ø±ÙŠØ¨ÙŠ Ù…ØªÙƒØ§Ù…Ù„ Ù…Ø¹ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙŠÙ… AI.</p>
                <button class="btn-main" onclick="switchView('scenarios')">Enter Stage âš¡</button>
            </div>
            
            <div style="display:flex; gap:20px; justify-content: center;">
                <div class="jury-panel" style="min-width: 150px; text-align: center;">
                    <h1>0</h1><small>Ø¬Ù„Ø³Ø§Øª</small>
                </div>
                <div class="jury-panel" style="min-width: 150px; text-align: center;">
                    <h1>--</h1><small>Ø£ÙØ¶Ù„ Ø¯Ø±Ø¬Ø©</small>
                </div>
            </div>
        </section>

        <section id="scenarios" class="view-section">
            <h2 style="margin-bottom: 20px;">Ø§Ø®ØªØ± Ø¨ÙŠØ¦Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¨ ğŸ“¦</h2>
            <div class="grid-container">
                <div class="scenario-card" onclick="startStage('conference')">
                    <div class="card-icon">ğŸ›ï¸</div>
                    <h3>Ù‚Ø§Ø¹Ø© Ù…Ø¤ØªÙ…Ø±</h3>
                    <p style="font-size:0.8rem; color:#aaa;">Ø¹Ø±Ø¶ Ø±Ø³Ù…ÙŠ â€¢ Ø¶ØºØ· ÙˆÙ‚Øª</p>
                    <button class="btn-main" style="margin-top:10px; font-size:0.8rem;">Start</button>
                </div>
                <div class="scenario-card" onclick="startStage('news')">
                    <div class="card-icon">ğŸ“º</div>
                    <h3>Ø§Ø³ØªÙˆØ¯ÙŠÙˆ Ø£Ø®Ø¨Ø§Ø±</h3>
                    <p style="font-size:0.8rem; color:#aaa;">Ù†Ø¨Ø±Ø© Ø«Ø§Ø¨ØªØ© â€¢ Ø¥ÙŠÙ‚Ø§Ø¹ Ù…Ø¶Ø¨ÙˆØ·</p>
                    <button class="btn-main" style="margin-top:10px; font-size:0.8rem;">Start</button>
                </div>
                <div class="scenario-card" onclick="startStage('interview')">
                    <div class="card-icon">ğŸ’¼</div>
                    <h3>Ù…Ù‚Ø§Ø¨Ù„Ø© Ø¹Ù…Ù„</h3>
                    <p style="font-size:0.8rem; color:#aaa;">Ø£Ø³Ø¦Ù„Ø© Ù…ÙØ§Ø¬Ø¦Ø©</p>
                    <button class="btn-main" style="margin-top:10px; font-size:0.8rem;">Start</button>
                </div>
            </div>
        </section>

        <section id="stage" class="view-section" style="height: 100%;">
            <div class="camera-container">
                <video id="webcam" autoplay playsinline muted></video>
                
                <div class="overlay-ui hud-top">
                    <div class="hud-box">
                        <small>WPM</small>
                        <div id="wpm-display" style="font-size:1.5rem; color:var(--accent);">0</div>
                    </div>
                    <div class="hud-box">
                        <small>COACH</small>
                        <div>Ø§Ø¶ØºØ· Ø§Ù„Ø²Ø± Ø§Ù„Ø£Ø­Ù…Ø± ÙˆØªØ­Ø¯Ø«.. Ø§Ù„Ø¬Ù…Ù‡ÙˆØ± Ø¬Ø§Ù‡Ø² ğŸ˜‰</div>
                    </div>
                    <div class="hud-box">LIVE</div>
                </div>

                <div class="overlay-ui" style="text-align: center; margin-top: auto; margin-bottom: 20px;">
                    <h2 id="live-text" style="background: rgba(0,0,0,0.5); display: inline-block; padding: 10px;">...</h2>
                </div>

                <div class="overlay-ui hud-bottom">
                    <button class="btn-main" style="background:transparent; border:1px solid white;" onclick="stopStage()">Ø®Ø±ÙˆØ¬</button>
                    <div class="mic-btn" id="mic-btn" onclick="toggleRecording()">
                        <i class="fas fa-microphone"></i>
                    </div>
                    <button class="btn-main" onclick="analyzePerformance()">ØªØ­ÙƒÙŠÙ… ÙÙˆØ±ÙŠ ğŸ›ï¸</button>
                </div>
            </div>
        </section>

        <section id="jury" class="view-section">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h2>ğŸ›ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙŠÙ… (AI Jury)</h2>
                <div style="text-align:left;">
                    <h1 style="color:var(--accent);">85/100</h1>
                    <small>Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</small>
                </div>
            </div>

            <div class="jury-grid">
                <div class="jury-panel">
                    <h3>ğŸ“¢ Ù„Ø¬Ù†Ø© Ø§Ù„ØµÙˆØª</h3>
                    <div style="margin-top:15px;">
                        <div style="display:flex; justify-content:space-between;"><span>ÙˆØ¶ÙˆØ­</span><span>90%</span></div>
                        <div class="progress-bar"><div class="progress-fill" style="width: 90%;"></div></div>
                    </div>
                    <div style="margin-top:15px;">
                        <div style="display:flex; justify-content:space-between;"><span>Ù†Ø¨Ø±Ø©</span><span>75%</span></div>
                        <div class="progress-bar"><div class="progress-fill" style="width: 75%;"></div></div>
                    </div>
                </div>

                <div class="jury-panel">
                    <h3>ğŸ˜ Ù„Ø¬Ù†Ø© Ø§Ù„Ø«Ù‚Ø©</h3>
                    <div style="margin-top:15px;">
                        <div style="display:flex; justify-content:space-between;"><span>Ù„ØºØ© Ø§Ù„Ø¬Ø³Ø¯</span><span>80%</span></div>
                        <div class="progress-bar"><div class="progress-fill" style="width: 80%;"></div></div>
                    </div>
                    <div style="margin-top:15px;">
                        <div style="display:flex; justify-content:space-between;"><span>ØªÙˆØ§ØµÙ„ Ø¨ØµØ±ÙŠ</span><span>60%</span></div>
                        <div class="progress-bar"><div class="progress-fill" style="width: 60%; background:orange;"></div></div>
                    </div>
                </div>
            </div>
            
            <div style="margin-top:20px; text-align:center;">
                <p>Ø§Ù„Ù‚Ø±Ø§Ø±: <strong>Ø£Ø¯Ø§Ø¡ Ù…Ù…ØªØ§Ø²ØŒ Ù„ÙƒÙ† ØªØ­ØªØ§Ø¬ Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ø¨ØµØ±ÙŠ.</strong></p>
                <button class="btn-main" onclick="switchView('dashboard')">Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø©</button>
            </div>
        </section>

        <section id="analysis" class="view-section">
            <h2>ğŸ“Š ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ</h2>
            <div class="jury-panel" style="margin-top:20px; height: 300px; display:flex; align-items:flex-end; gap:10px; justify-content:center;">
                <div style="width:50px; height:40%; background:var(--primary); border-radius:5px 5px 0 0; position:relative;"><span style="position:absolute; bottom:-25px;">Ø¯Ù‚ÙŠÙ‚Ø© 1</span></div>
                <div style="width:50px; height:70%; background:var(--accent); border-radius:5px 5px 0 0; position:relative;"><span style="position:absolute; bottom:-25px;">Ø¯Ù‚ÙŠÙ‚Ø© 2</span></div>
                <div style="width:50px; height:50%; background:var(--primary); border-radius:5px 5px 0 0; position:relative;"><span style="position:absolute; bottom:-25px;">Ø¯Ù‚ÙŠÙ‚Ø© 3</span></div>
                <div style="width:50px; height:90%; background:var(--accent); border-radius:5px 5px 0 0; position:relative;"><span style="position:absolute; bottom:-25px;">Ø¯Ù‚ÙŠÙ‚Ø© 4</span></div>
            </div>
            <div style="margin-top:40px; display:flex; justify-content:space-around;">
                <div class="jury-panel">WPM: <strong>120</strong> (Ù…Ø«Ø§Ù„ÙŠ)</div>
                <div class="jury-panel">Fillers: <strong>3</strong> (Ø£Ù…Ù…/ÙŠØ¹Ù†ÙŠ)</div>
                <div class="jury-panel">Confidence: <strong>High</strong></div>
            </div>
        </section>

    </main>

    <script>
        // 1. Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØµÙØ­Ø§Øª
        function switchView(viewId) {
            // Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
            document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
            document.getElementById(viewId).classList.add('active');
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠØ©
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            // (Ø§Ø®ØªÙŠØ§Ø±ÙŠ: ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© ÙƒÙˆØ¯ Ù„ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø²Ø± Ø§Ù„Ù†Ø´Ø· Ù‡Ù†Ø§)
        }

        // 2. ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø³Ø±Ø­ (Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§)
        function startStage(scenario) {
            switchView('stage');
            // ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
            const video = document.getElementById('webcam');
            if (navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia({ video: true })
                    .then(function (stream) {
                        video.srcObject = stream;
                    })
                    .catch(function (err) {
                        console.log("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§: " + err);
                        alert("ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù„ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù€ Stage");
                    });
            }
        }

        function stopStage() {
            const video = document.getElementById('webcam');
            const stream = video.srcObject;
            if(stream) {
                const tracks = stream.getTracks();
                tracks.forEach(track => track.stop());
            }
            video.srcObject = null;
            switchView('dashboard');
        }

        // 3. Ù…Ø­Ø±Ùƒ Ø§Ù„ØµÙˆØª (Speech Engine)
        let recognition;
        let isRecording = false;

        if ('webkitSpeechRecognition' in window) {
            recognition = new webkitSpeechRecognition();
            recognition.continuous = true;
            recognition.interimResults = true;
            recognition.lang = 'ar-SA';

            recognition.onresult = function(event) {
                let interimTranscript = '';
                for (let i = event.resultIndex; i < event.results.length; ++i) {
                    if (event.results[i].isFinal) {
                        document.getElementById('live-text').innerText = event.results[i][0].transcript;
                        // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ WPM Ø¨Ø´ÙƒÙ„ Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù„Ù„Ù…Ø­Ø§ÙƒØ§Ø©
                        document.getElementById('wpm-display').innerText = Math.floor(Math.random() * (160 - 100) + 100);
                    } else {
                        interimTranscript += event.results[i][0].transcript;
                    }
                }
            };
        }

        function toggleRecording() {
            const btn = document.getElementById('mic-btn');
            if (!isRecording) {
                recognition.start();
                isRecording = true;
                btn.classList.add('active'); // ØªØ­ÙˆÙŠÙ„ Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø®Ø¶Ø±
                btn.innerHTML = '<i class="fas fa-stop"></i>';
            } else {
                recognition.stop();
                isRecording = false;
                btn.classList.remove('active'); // Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£Ø­Ù…Ø±
                btn.innerHTML = '<i class="fas fa-microphone"></i>';
            }
        }

        function analyzePerformance() {
            stopStage(); // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
            switchView('jury'); // Ø§Ù„Ø°Ù‡Ø§Ø¨ Ù„Ù„Ù†ØªØ§Ø¦Ø¬
        }

    </script>
</body>
</html>
